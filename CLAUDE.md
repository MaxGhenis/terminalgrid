# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

TerminalGrid is a VS Code extension that enables keyboard-driven terminal grid management by moving terminals to the editor area (where vertical splitting is supported). It optionally auto-launches CLI tools like Claude Code, Aider, or Codex in new terminals.

## Build Commands

```bash
npm ci              # Install dependencies (use ci, not install)
npm run compile     # Compile TypeScript to out/
npm run watch       # Compile with watch mode
npm run lint        # Run ESLint on src/
```

## Packaging & Publishing

```bash
npm install -g @vscode/vsce  # Install VS Code Extension CLI
vsce package                  # Create .vsix file
```

## Architecture

Single-file extension (`src/extension.ts`) that:

1. **On Activation**: Auto-configures VS Code terminal settings (if first run):
   - Sets `terminal.integrated.defaultLocation` to `editor` for grid splitting
   - Enables persistent sessions
   - Creates a custom terminal profile with the auto-launch command

2. **Commands** (registered in `package.json`):
   - `terminalgrid.setup`: Manually re-run configuration
   - `terminalgrid.splitDownAndOpenTerminal`: Split editor down + open terminal
   - `terminalgrid.splitRightAndOpenTerminal`: Split editor right + open terminal
   - `terminalgrid.openTerminal`: Open new terminal

3. **Configuration Watcher**: Re-runs setup when `autoLaunchCommand` changes

## Key Files

- `src/extension.ts` - All extension logic
- `package.json` - Extension manifest (commands, keybindings, configuration schema)
- `out/` - Compiled JavaScript (gitignored, generated by `npm run compile`)

## CI/CD

- **CI** (`.github/workflows/ci.yml`): Runs on push/PR to master - compiles, lints, packages
- **Release** (`.github/workflows/release.yml`): Triggered by `v*` tags - creates GitHub release with .vsix

## Testing

Test infrastructure exists in `package.json` but no tests are implemented yet. The extension is manually tested by:
1. Run `npm run compile`
2. Press F5 in VS Code to launch Extension Development Host
3. Test keyboard shortcuts and commands
